<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>SPIR-V Extension SPV_AMD_gcn_shader</title>
<style>
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";
@import "https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css";

p {
    font-family: Arial, Helvetica, sans-serif;
    line-height: normal;
}
em, b, strong {
    color: darkblue;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>SPIR-V Extension SPV_AMD_gcn_shader</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_name_strings">Name Strings</a></li>
<li><a href="#_contact">Contact</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_notice">Notice</a></li>
<li><a href="#_status">Status</a></li>
<li><a href="#_version">Version</a></li>
<li><a href="#_number">Number</a></li>
<li><a href="#_extension_nnn_tbd">Extension #NNN <em>TBD</em></a></li>
<li><a href="#_dependencies">Dependencies</a></li>
<li><a href="#_overview">Overview</a></li>
<li><a href="#_extension_name">Extension Name</a></li>
<li><a href="#_new_instructions">New Instructions</a></li>
<li><a href="#_modifications_to_the_spir_v_specification_version_1_1">Modifications to the SPIR-V Specification, Version 1.1</a></li>
<li><a href="#_validation_rules">Validation Rules</a></li>
<li><a href="#_issues">Issues</a></li>
<li><a href="#_revision_history">Revision History</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_name_strings">Name Strings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>SPV_AMD_gcn_shader</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contact">Contact</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <strong>Issues</strong> list in the Khronos SPIRV-Registry repository:
<a href="https://github.com/KhronosGroup/SPIRV-Registry" class="bare">https://github.com/KhronosGroup/SPIRV-Registry</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributors">Contributors</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Dominik Witczak, AMD</p>
</li>
<li>
<p>Rex Xu, AMD</p>
</li>
<li>
<p>Daniel Rakos, AMD</p>
</li>
<li>
<p>Graham Sellers, AMD</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notice">Notice</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright (c) 2016 AMD.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_status">Status</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proposed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version">Version</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Modified Date: May 31, 2016
Revision:      1</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_number">Number</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_extension_nnn_tbd">Extension #NNN <em>TBD</em></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_dependencies">Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension is written against Revision 1 of the version 1.1 of the
SPIR-V Specification.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension is written to provide the functionality of the
GL_AMD_gcn_shader, OpenGL Shading Language Specification extension, for SPIR-V.</p>
</div>
<div class="paragraph">
<p>This extension exposes miscellaneous features of the AMD "Graphics Core Next"
shader architecture. This includes cube map query functions and a functionality
to query the elapsed shader core time.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extension_name">Extension Name</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To enable SPV_AMD_gcn_shader extension in SPIR-V, use</p>
</div>
<div class="literalblock">
<div class="content">
<pre>OpExtension "SPV_AMD_gcn_shader"</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_instructions">New Instructions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension adds the following extended instructions</p>
</div>
<div class="listingblock">
<div class="content">
<pre>CubeFaceCoordAMD
CubeFaceIndexAMD
TimeAMD</pre>
</div>
</div>
<div class="paragraph">
<p>To use the extended instructions described below, declare:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpExtInstImport %ext "SPV_AMD_gcn_shader"</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modifications_to_the_spir_v_specification_version_1_1">Modifications to the SPIR-V Specification, Version 1.1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Modify Section 3.32.1, Miscellaneous Instructions</p>
</div>
<div class="paragraph">
<p>(Add to the end of the section a list of instructions as described below)</p>
</div>
<div class="sect2">
<h3 id="_cubefacecoordamd">CubeFaceCoordAMD</h3>
<div class="paragraph">
<p>The function cubeFaceCoordAMD returns a two-component floating point vector that
represents the 2D texture coordinates that would be used for accessing the selected
cube map face for the given cube map texture coordinates given as parameter P.</p>
</div>
<div class="paragraph">
<p>The operand &lt;P&gt; must be a pointer to a 3-component 32-bit floating-point vector.</p>
</div>
<div class="paragraph">
<p>This instruction is only valid in Fragment, Geometry, GLCompute, TessellationControl,
TessellationEvaluation and Vertex execution models.</p>
</div>
<div class="paragraph">
<p>Result Type must be a 2-component 32-bit floating-point vector.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>3 | 2 | &lt;id&gt; Result Type | &lt;id&gt; P</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cubefaceindexamd">CubeFaceIndexAMD</h3>
<div class="paragraph">
<p>The function CubeFaceIndexAMD returns a single floating point value that represents
the index of the cube map face that would be accessed by texture lookup functions
for the cube map texture coordinates given as parameter. The returned value
correspond to cube map faces as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0.0 for the cube map face facing the positive X direction</p>
</li>
<li>
<p>1.0 for the cube map face facing the negative X direction</p>
</li>
<li>
<p>2.0 for the cube map face facing the positive Y direction</p>
</li>
<li>
<p>3.0 for the cube map face facing the negative Y direction</p>
</li>
<li>
<p>4.0 for the cube map face facing the positive Z direction</p>
</li>
<li>
<p>5.0 for the cube map face facing the negative Z direction</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The operand &lt;P&gt; must be a 3-component 32-bit floating-point vector.</p>
</div>
<div class="paragraph">
<p>This instruction is only valid in Fragment, Geometry, GLCompute, TessellationControl,
TessellationEvaluation and Vertex execution models.</p>
</div>
<div class="paragraph">
<p>Result Type must be a 32-bit floating-point scalar.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>3 | 1 | &lt;id&gt; Result Type | &lt;id&gt; P</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_timeamd">TimeAMD</h3>
<div class="paragraph">
<p>The timeAMD function returns a 64-bit value representing the current execution clock
as seen by the shader processor. Time monotonically increments as the processor
executes instructions. The returned time will wrap after it exceeds the maximum
value representable in 64 bits. The units of time are not defined and need not be
constant. Time is not dynamically uniform. That is, shader invocations executing
as part of a single draw or dispatch will not necessarily see the same value of
time. Time is also not guaranteed to be consistent across shader stages. For
example, there is no requirement that time sampled inside a fragment shader invocation
will be greater than the time sampled in the vertex that lead to its execution.</p>
</div>
<div class="paragraph">
<p>This instruction is only valid in Fragment, Geometry, GLCompute, TessellationControl,
TessellationEvaluation and Vertex execution models.</p>
</div>
<div class="paragraph">
<p>Use of this instruction requires declaration of the <strong>Int64</strong> capability.</p>
</div>
<div class="paragraph">
<p>Result Type must be a 64-bit unsigned integer scalar.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>2 | 3 | &lt;id&gt; Result Type</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validation_rules">Validation Rules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>None.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_issues">Issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>None</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history">Revision History</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-rows stripes-even stretch">
<colgroup>
<col style="width: 5%;">
<col style="width: 10%;">
<col style="width: 15%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rev</th>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Author</th>
<th class="tableblock halign-left valign-top">Changes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">May 31, 2016</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dominik Witczak</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial revision based on AMD_gcn_shader.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>