<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>SPIR-V Extension SPV_AMD_shader_ballot</title>
<style>
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";
@import "https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css";

p {
    font-family: Arial, Helvetica, sans-serif;
    line-height: normal;
}
em, b, strong {
    color: darkblue;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>SPIR-V Extension SPV_AMD_shader_ballot</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_name_strings">Name Strings</a></li>
<li><a href="#_contact">Contact</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_notice">Notice</a></li>
<li><a href="#_status">Status</a></li>
<li><a href="#_version">Version</a></li>
<li><a href="#_dependencies">Dependencies</a></li>
<li><a href="#_overview">Overview</a></li>
<li><a href="#_extension_name">Extension Name</a></li>
<li><a href="#_new_instructions">New Instructions</a></li>
<li><a href="#_modifications_to_the_spir_v_specification_version_1_1">Modifications to the SPIR-V Specification, Version 1.1</a></li>
<li><a href="#_validation_rules">Validation Rules</a></li>
<li><a href="#_issues">Issues</a></li>
<li><a href="#_revision_history">Revision History</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_name_strings">Name Strings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>SPV_AMD_shader_ballot</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contact">Contact</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <strong>Issues</strong> list in the Khronos SPIRV-Registry repository:
<a href="https://github.com/KhronosGroup/SPIRV-Registry" class="bare">https://github.com/KhronosGroup/SPIRV-Registry</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributors">Contributors</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Qun Lin, AMD</p>
</li>
<li>
<p>Graham Sellers, AMD</p>
</li>
<li>
<p>Daniel Rakos, AMD</p>
</li>
<li>
<p>Rex Xu, AMD</p>
</li>
<li>
<p>Dominik Witczak, AMD</p>
</li>
<li>
<p>Matth√§us G. Chajdas, AMD</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notice">Notice</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright (c) 2016 The Khronos Group Inc. Copyright terms at
<a href="http://www.khronos.org/registry/speccopyright.html" class="bare">http://www.khronos.org/registry/speccopyright.html</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_status">Status</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Released.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version">Version</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Modified Date: March 28, 2018
Revision:      6</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependencies">Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension is written against Revision 1 of the version 1.10 of the
SPIR-V Specification.</p>
</div>
<div class="paragraph">
<p>The extension is written against Revision 1 of the OpenGL extension
AMD_shader_ballot.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension is written to provide the functionality of the
AMD_shader_ballot, OpenGL Shading Language Specification extension,
for SPIR-V.</p>
</div>
<div class="paragraph">
<p>This extension introduces eight core instructions and four new extended
instructions to SPIR-V that enable additional subgroup operations in shaders.</p>
</div>
<div class="paragraph">
<p>This extension adds 16-bit result type support to a number of core group operations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extension_name">Extension Name</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To enable SPV_AMD_shader_ballot extension in SPIR-V, use</p>
</div>
<div class="literalblock">
<div class="content">
<pre>OpExtension "SPV_AMD_shader_ballot"</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_instructions">New Instructions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension adds the following core instructions</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpGroupIAddNonUniformAMD = 5000
OpGroupFAddNonUniformAMD = 5001
OpGroupFMinNonUniformAMD = 5002
OpGroupUMinNonUniformAMD = 5003
OpGroupSMinNonUniformAMD = 5004
OpGroupFMaxNonUniformAMD = 5005
OpGroupUMaxNonUniformAMD = 5006
OpGroupSMaxNonUniformAMD = 5007</pre>
</div>
</div>
<div class="paragraph">
<p>This extension adds the following extended instructions</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SwizzleInvocationsAMD = 1
SwizzleInvocationsMaskedAMD = 2
WriteInvocationAMD = 3
MbcntAMD = 4</pre>
</div>
</div>
<div class="paragraph">
<p>To use the new core instructions, declare:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpCapability Groups
OpExtension "SPV_AMD_shader_ballot"</pre>
</div>
</div>
<div class="paragraph">
<p>To use the new extended instructions, declare:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpExtension "SPV_AMD_shader_ballot"
OpExtInstImport %ext "SPV_AMD_shader_ballot"</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modifications_to_the_spir_v_specification_version_1_1">Modifications to the SPIR-V Specification, Version 1.1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Modify Section 3.32.21, Group Instructions</p>
</div>
<div class="sect2">
<h3 id="_opgroupiadd">OpGroupIAdd</h3>
<div class="paragraph">
<p>(Replace the following sentence):</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be a 32-bit or 64-bit &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>(with):</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupumin">OpGroupUMin</h3>
<div class="paragraph">
<p>(Replace the following sentence):</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be a 32-bit or 64-bit &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>(with):</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupsmin">OpGroupSMin</h3>
<div class="paragraph">
<p>(Replace the following sentence):</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be a 32-bit or 64-bit &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>(with):</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupumax">OpGroupUMax</h3>
<div class="paragraph">
<p>(Replace the following sentence):</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be a 32-bit or 64-bit &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>(with):</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupsmax">OpGroupSMax</h3>
<div class="paragraph">
<p>(Replace the following sentence):</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be a 32-bit or 64-bit &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>(with):</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>(Add to the end of the section)</p>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupiaddnonuniformamd">OpGroupIAddNonUniformAMD</h3>
<div class="paragraph">
<p>An integer add group operation specified for all values of &lt;X&gt;
specified by invocations in the group.</p>
</div>
<div class="paragraph">
<p>The identity &lt;I&gt; is 0.</p>
</div>
<div class="paragraph">
<p>All invocations of this module within &lt;Execution&gt; must reach this point of execution.</p>
</div>
<div class="paragraph">
<p>This instruction is able to work correctly if placed within non-uniform control
flow within &lt;Execution&gt;.</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>&lt;Execution&gt; must be Workgroup or Subgroup Scope.</p>
</div>
<div class="paragraph">
<p>The type of &lt;X&gt; must be the same as &lt;Result Type&gt;.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>6 | 5000  | &lt;id&gt; Result Type | &lt;id&gt; Result  | Scope &lt;id&gt; Execution | Group Operation | &lt;id&gt; X</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupfaddnonuniformamd">OpGroupFAddNonUniformAMD</h3>
<div class="paragraph">
<p>A floating-point add group operation specified for all values of &lt;X&gt; specified
by invocations in the group.</p>
</div>
<div class="paragraph">
<p>The identity &lt;I&gt; is 0.</p>
</div>
<div class="paragraph">
<p>All invocations of this module within &lt;Execution&gt; must reach this point of
execution.</p>
</div>
<div class="paragraph">
<p>This instruction is able to work correctly if placed within non-uniform control
flow within &lt;Execution&gt;.</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>&lt;Execution&gt; must be Workgroup or Subgroup Scope.</p>
</div>
<div class="paragraph">
<p>The type of &lt;X&gt; must be the same as &lt;Result Type&gt;.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>6 | 5001 | &lt;id&gt; Result Type | &lt;id&gt; Result | &lt;id&gt; Scope Execution | Group Operation | &lt;id&gt; X</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupfminnonuniformamd">OpGroupFMinNonUniformAMD</h3>
<div class="paragraph">
<p>A floating-point minimum group operation specified for all values of &lt;X&gt; specified
by invocations in the group.</p>
</div>
<div class="paragraph">
<p>The identity &lt;I&gt; is +INF.</p>
</div>
<div class="paragraph">
<p>All invocations of this module within &lt;Execution&gt; must reach this point of
execution.</p>
</div>
<div class="paragraph">
<p>This instruction is able to work correctly if placed within non-uniform control
flow within &lt;Execution&gt;.</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>&lt;Execution&gt; must be Workgroup or Subgroup Scope.</p>
</div>
<div class="paragraph">
<p>The type of &lt;X&gt; must be the same as &lt;Result Type&gt;.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>6 | 5002 | &lt;id&gt; Result Type | &lt;id&gt; Result | &lt;id&gt; Scope Execution | Group Operation | &lt;id&gt; X</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupuminnonuniformamd">OpGroupUMinNonUniformAMD</h3>
<div class="paragraph">
<p>An unsigned integer minimum group operation specified for all values of &lt;X&gt;
specified by invocations in the group.</p>
</div>
<div class="paragraph">
<p>The identity &lt;I&gt; is UINT_MAX when X is 32 bits wide and ULONG_MAX when &lt;X&gt; is
64 bits wide.</p>
</div>
<div class="paragraph">
<p>All invocations of this module within &lt;Execution&gt; must reach this point of execution.</p>
</div>
<div class="paragraph">
<p>This instruction is able to work correctly if placed within non-uniform control flow
within &lt;Execution&gt;.</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>&lt;Execution&gt; must be Workgroup or Subgroup Scope.</p>
</div>
<div class="paragraph">
<p>The type of &lt;X&gt; must be the same as &lt;Result Type&gt;.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>6 | 5003 | &lt;id&gt; Result Type | &lt;id&gt; Result | &lt;id&gt; Scope Execution | Group Operation | &lt;id&gt; X</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupsminnonuniformamd">OpGroupSMinNonUniformAMD</h3>
<div class="paragraph">
<p>A signed integer minimum group operation specified for all values of &lt;X&gt; specified
by invocations in the group.</p>
</div>
<div class="paragraph">
<p>The identity &lt;I&gt; is INT_MAX when X is 32 bits wide and LONG_MAX when &lt;X&gt; is 64
bits wide.</p>
</div>
<div class="paragraph">
<p>All invocations of this module within &lt;Execution&gt; must reach this point of
execution.</p>
</div>
<div class="paragraph">
<p>This instruction is able to work correctly if placed within non-uniform control
flow within &lt;Execution&gt;.</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>&lt;Execution&gt; must be Workgroup or Subgroup Scope.</p>
</div>
<div class="paragraph">
<p>The type of &lt;X&gt; must be the same as &lt;Result Type&gt;.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>6 | 5004 | &lt;id&gt; Result Type | &lt;id&gt; Result | &lt;id&gt; Scope Execution | Group Operation | &lt;id&gt; X</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupfmaxnonuniformamd">OpGroupFMaxNonUniformAMD</h3>
<div class="paragraph">
<p>A floating-point maximum group operation specified for all values of &lt;X&gt; specified
by invocations in the group.</p>
</div>
<div class="paragraph">
<p>The identity &lt;I&gt; is -INF.</p>
</div>
<div class="paragraph">
<p>All invocations of this module within &lt;Execution&gt; must reach this point of
execution.</p>
</div>
<div class="paragraph">
<p>This instruction is able to work correctly if placed within non-uniform control
flow within &lt;Execution&gt;.</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>&lt;Execution&gt; must be Workgroup or Subgroup Scope.</p>
</div>
<div class="paragraph">
<p>The type of &lt;X&gt; must be the same as &lt;Result Type&gt;.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>6 | 5005 | &lt;id&gt; Result Type | &lt;id&gt; Result | &lt;id&gt; Scope Execution | Group Operation | &lt;id&gt; X</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupumaxnonuniformamd">OpGroupUMaxNonUniformAMD</h3>
<div class="paragraph">
<p>An unsigned integer maximum group operation specified for all values of &lt;X&gt;
specified by invocations in the group.</p>
</div>
<div class="paragraph">
<p>The identity &lt;I&gt; is 0.</p>
</div>
<div class="paragraph">
<p>All invocations of this module within &lt;Execution&gt; must reach this point of execution.</p>
</div>
<div class="paragraph">
<p>This instruction is able to work correctly if placed within non-uniform control flow
within &lt;Execution&gt;.</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>&lt;Execution&gt; must be Workgroup or Subgroup Scope.</p>
</div>
<div class="paragraph">
<p>The type of &lt;X&gt; must be the same as &lt;Result Type&gt;.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>6 | 5006 | &lt;id&gt; Result Type | &lt;id&gt; Result | &lt;id&gt; Scope Execution&gt; | Group Operation | &lt;id&gt; X</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_opgroupsmaxnonuniformamd">OpGroupSMaxNonUniformAMD</h3>
<div class="paragraph">
<p>A signed integer maximum group operation specified for all values of &lt;X&gt; specified
by invocations in the group.</p>
</div>
<div class="paragraph">
<p>The identity &lt;I&gt; is INT_MIN when X is 32 bits wide and LONG_MIN when &lt;X&gt; is 64
bits wide.</p>
</div>
<div class="paragraph">
<p>All invocations of this module within &lt;Execution&gt; must reach this point of execution.</p>
</div>
<div class="paragraph">
<p>This instruction is able to work correctly if placed within non-uniform control
flow within &lt;Execution&gt;.</p>
</div>
<div class="paragraph">
<p>&lt;Result Type&gt; must be an &lt;integer type&gt; scalar.</p>
</div>
<div class="paragraph">
<p>&lt;Execution&gt; must be Workgroup or Subgroup Scope.</p>
</div>
<div class="paragraph">
<p>The type of &lt;X&gt; must be the same as &lt;Result Type&gt;.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>6 | 5007 | &lt;id&gt; Result Type | &lt;id&gt; Result | &lt;id&gt; Scope Execution | Group Operation | &lt;id&gt; X</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_swizzleinvocationsamd">SwizzleInvocationsAMD</h3>
<div class="paragraph">
<p>Swizzles data within a group of 4 consecutive invocations of the subgroup based
on &lt;offset&gt; as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>for (i = 0; i &lt; SubgroupSize; i+=4) {
    dataOut[i+0] = isActive[i+offset.x] ? dataIn[i+offset.x] : 0;
    dataOut[i+1] = isActive[i+offset.y] ? dataIn[i+offset.y] : 0;
    dataOut[i+2] = isActive[i+offset.z] ? dataIn[i+offset.z] : 0;
    dataOut[i+3] = isActive[i+offset.w] ? dataIn[i+offset.w] : 0;
}</pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>isActive[i] tells whether the invocation with the index &lt;i&gt; is currently active
within the subgroup.</p>
</li>
<li>
<p>dataIn[i] is the value of &lt;data&gt; for invocation index &lt;i&gt;.</p>
</li>
<li>
<p>dataOut[i] is the return value of the function for invocation index &lt;i&gt;.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The operand data can be any scalar or vector type.</p>
</div>
<div class="paragraph">
<p>The operand offset must be a unsigned integer vector with 4 components, and each
component is constant integer with a value in the range [0, 3].</p>
</div>
<div class="paragraph">
<p>Result Type and the type of operand &lt;data&gt; must be the same type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>3 | 1 | &lt;id&gt; data | &lt;id&gt; offset</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_swizzleinvocationsmaskedamd">SwizzleInvocationsMaskedAMD</h3>
<div class="paragraph">
<p>Swizzles data within a group of 32 consecutive invocations with a
limited mask as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>for (i = 0; i &lt; SubgroupSize; i++) {
   j = (((i &amp; 0x1f) &amp; mask.x) | mask.y) ^ mask.z;
   j |= (i &amp; 0x20); // which group of 32
   dataOut[i] = isActive[j] ? dataIn[j] : 0;
}</pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>isActive[i] tells whether the invocation with the index &lt;i&gt; is currently active
within the subgroup.</p>
</li>
<li>
<p>dataIn[i] is the value of &lt;data&gt; for invocation index &lt;i&gt;.</p>
</li>
<li>
<p>dataOut[i] is the return value of the function for invocation index &lt;i&gt;.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The operand data can be any scalar or vector type.</p>
</div>
<div class="paragraph">
<p>The operand mask must be a unsigned integer vector with 3 components, and each
component is constant integer with a value in the range [0, 31].</p>
</div>
<div class="paragraph">
<p>Result Type and the type of operand &lt;data&gt; must be the same type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>3 | 2 | &lt;id&gt; data | &lt;id&gt; mask</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_writeinvocationamd">WriteInvocationAMD</h3>
<div class="paragraph">
<p>Returns &lt;inputValue&gt; for all active invocations in the subgroup except for the
invocation whose invocation index within the subgroup is &lt;invocationIndex&gt;.
Within a subgroup, the outputs are defined as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>for (i = 0; i &lt; SubgroupSize; i++) {
   out[i] = (i == invocationIndex) ? writeValue : inputValue;
}</pre>
</div>
</div>
<div class="paragraph">
<p>Where out[i] is the return value of the function for invocation index &lt;i&gt;.</p>
</div>
<div class="paragraph">
<p>Result Type must be a scalar or vector type.</p>
</div>
<div class="paragraph">
<p>The type of inputValue and writeValue must be the same as Result Type.</p>
</div>
<div class="paragraph">
<p>invocationIndex must be a 32-bit unsigned integer with a value in the range
[0, SubgroupSize - 1].</p>
</div>
<div class="paragraph">
<p>writeValue and invocationIndex must be dynamically uniform within the subgroup,
otherwise the result of the operation is undefined.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>4 | 3  | &lt;id&gt; inputValue | &lt;id&gt; writeValue | &lt;id&gt; invocationIndex</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mbcntamd">MbcntAMD</h3>
<div class="paragraph">
<p>Returns the bit count of SubgroupLtMaskARB with &lt;mask&gt; as described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>%X = OpBitwiseAnd u32 %SubgroupLtMaskARB %mask
&lt;Result&gt; = OpBitCount u32 %X</pre>
</div>
</div>
<div class="paragraph">
<p>Result Type and mask must be 32-bit unsigned integers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>4 | &lt;id&gt; mask</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validation_rules">Validation Rules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>None.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_issues">Issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>1.</p>
</div>
<div class="paragraph">
<p>Supported &lt;result types&gt; for group operation instructions depend on capabilities which are
defined elsewhere in the SPIR-V code. In specific, these capabilities may come from
other SPIR-V extensions, which are out of scope of this extension specification.</p>
</div>
<div class="paragraph">
<p>Due to the above, we have decided to relax the language restricting allowed result types for
group operation instructions so that it now mentions general integer type, instead of
specialized integer types.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history">Revision History</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-rows stripes-even stretch">
<colgroup>
<col style="width: 5%;">
<col style="width: 10%;">
<col style="width: 15%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rev</th>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Author</th>
<th class="tableblock halign-left valign-top">Changes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">April 21, 2016</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quentin Lin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial revision based on AMD_shader_ballot.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">May 20, 2016</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dominik Witczak</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Document refactoring</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">May 20, 2016</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matth√§us G. Chajdas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Document refactoring</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">August 11, 2016</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rex Xu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add new core instructions to handle group operations placed with non-uniform control flow.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">October 13, 2016</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dominik Witczak</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added missing numerical value assignments, removed extension number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">March 28, 2018</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dominik Witczak</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generalized type restrictions for result types of group operation instructions to integer types. Added issue#1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">May 16, 2019</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dominik Witczak</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed an issue in the section describing how to use the new functionality. Fixed MbcntAMD&#8217;s return type.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>