<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 9.0.0rc1">
<title>SPV_EXT_shader_tile_image</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(1);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>SPV_EXT_shader_tile_image</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_name_strings">Name Strings</h2>
<div class="sectionbody">
<div class="paragraph"><p>SPV_EXT_shader_tile_image</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_contact">Contact</h2>
<div class="sectionbody">
<div class="paragraph"><p>To report problems with this extension, please open a new issue at:</p></div>
<div class="paragraph"><p><a href="https://github.com/KhronosGroup/SPIRV-Headers">https://github.com/KhronosGroup/SPIRV-Headers</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_contributors">Contributors</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Sandeep Kakarlapudi, Arm
</p>
</li>
<li>
<p>
Jan-Harald Fredriksen, Arm
</p>
</li>
<li>
<p>
Alan Baker, Google
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_notice">Notice</h2>
<div class="sectionbody">
<div class="paragraph"><p>Copyright (c) 2021-2023 The Khronos Group Inc. Copyright terms at
<a href="http://www.khronos.org/registry/speccopyright.html">http://www.khronos.org/registry/speccopyright.html</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_status">Status</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Complete
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_version">Version</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all"
style="
width:40%;
">
<col style="width:50%;">
<col style="width:50%;">
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Last Modified Date</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">2023-03-23</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Revision</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_dependencies">Dependencies</h2>
<div class="sectionbody">
<div class="paragraph"><p>This extension is written against the Unified SPIR-V Specification,
Version 1.5 Revision 5.</p></div>
<div class="paragraph"><p>This extension requires SPIR-V 1.0.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph"><p>This extension adds functionality to enable fragment shaders to read color,
depth or stencil data from the framebuffer.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_extension_name">Extension Name</h2>
<div class="sectionbody">
<div class="paragraph"><p>To use this extension within a SPIR-V module, the following <strong>OpExtension</strong> must
be present in the module:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>OpExtension "SPV_EXT_shader_tile_image"</pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_new_capabilities">New Capabilities</h2>
<div class="sectionbody">
<div class="paragraph"><p>This extension introduces new capabilities:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>TileImageColorReadAccessEXT
TileImageDepthReadAccessEXT
TileImageStencilReadAccessEXT</pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_new_instructions">New Instructions</h2>
<div class="sectionbody">
<div class="paragraph"><p>Instructions added under the <strong>TileImageColorReadAccessEXT</strong> capability:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>OpColorAttachmentReadEXT</pre>
</div></div>
<div class="paragraph"><p>Instructions added under the <strong>TileImageDepthReadAccessEXT</strong> capability:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>OpDepthAttachmentReadEXT</pre>
</div></div>
<div class="paragraph"><p>Instructions added under the <strong>TileImageStencilReadAccessEXT</strong> capability:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>OpStencilAttachmentReadEXT</pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_new_execution_modes">New Execution Modes</h2>
<div class="sectionbody">
<div class="paragraph"><p>Execution modes added under the <strong>TileImageColorReadAccessEXT</strong> capability:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>NonCoherentColorAttachmentReadEXT</pre>
</div></div>
<div class="paragraph"><p>Execution modes added under the <strong>TileImageDepthReadAccessEXT</strong> capability:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>NonCoherentDepthAttachmentReadEXT</pre>
</div></div>
<div class="paragraph"><p>Execution modes added under the <strong>TileImageStencilReadAccessEXT</strong> capability:</p></div>
<div class="listingblock">
<div class="content monospaced">
<pre>NonCoherentStencilAttachmentReadEXT</pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_modifications_to_the_spir_v_specification_version_1_5">Modifications to the SPIR-V Specification, Version 1.5</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_validation_rules">Validation Rules</h3>
<div class="paragraph"><p>In section 2.16.1 Universal Validation Rules, add <strong>TileImageEXT</strong> to the list of
storage classes following this sentence:</p></div>
<div class="paragraph"><p>===
Any pointer operand to an OpFunctionCall must point into one of the following
storage classes:
===</p></div>
<div class="paragraph"><p>In 2.16.2. Validation Rules for Shader Capabilities, add the following
under Decorations:</p></div>
<div class="ulist"><ul>
<li>
<p>
It is invalid to apply the <strong>Coherent</strong> decoration to variables in the
   <strong>TileImageEXT</strong> storage class if the <strong>NonCoherentColorAttachmentReadEXT</strong>
   execution mode is declared.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_execution_modes">Execution Modes</h3>
<div class="paragraph"><p>In section 3.6 "Execution Mode", add the following rows to the Execution Mode
table:</p></div>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:25%;">
<col style="width:25%;">
<col style="width:25%;">
<col style="width:25%;">
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2" ><p class="tableblock">Execution Mode</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Extra Operands</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Enabling Capabilities</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4169</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>NonCoherentColorAttachmentReadEXT</strong><br>
Disables rasterization order access guarantees for color attachment reads. Only
valid in the <strong>Fragment</strong> execution model.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>TileImageColorReadAccessEXT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4170</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>NonCoherentDepthAttachmentReadEXT</strong><br>
Disables rasterization order access guarantees for depth attachment reads. Only
valid in the <strong>Fragment</strong> execution model.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>TileImageDepthReadAccessEXT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4171</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>NonCoherentStencilAttachmentReadEXT</strong><br>
Disables rasterization order access guarantees for stencil attachment reads. Only
valid in the <strong>Fragment</strong> execution model.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>TileImageStencilReadAccessEXT</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_storage_classes">Storage Classes</h3>
<div class="paragraph"><p>In section 3.7 "Storage Class", add the following rows to the Storage Class
table:</p></div>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:33%;">
<col style="width:33%;">
<col style="width:33%;">
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2" > Storage Class </th>
<th class="tableblock halign-left valign-top" > Enabling Capabilities</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4172</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>TileImageEXT</strong><br>
Visible across all functions in all fragment invocations at a pixel location
within a render pass. For holding framebuffer color attachment memory. Only
valid with image type variables with <strong>Dim</strong> TileImageDataEXT. See the Client
API specification for more details on
tile images.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>TileImageColorReadAccessEXT</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_dims">Dims</h3>
<div class="paragraph"><p>In section 3.8 "Dim", add the following row to the Dim table:</p></div>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:33%;">
<col style="width:33%;">
<col style="width:33%;">
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2" > Dim </th>
<th class="tableblock halign-left valign-top" > Enabling Capabilities</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4173</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>TileImageDataEXT</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>TileImageColorReadAccessEXT</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_decorations">Decorations</h3>
<div class="paragraph"><p>In section 3.20 "Decoration", modify the description for "Location" replace the
last sentence:</p></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph"><p>Only valid for the <strong>Input</strong>, <strong>Output</strong>, and <strong>UniformConstant</strong> Storage Classes.</p></div>
</div></div>
<div class="paragraph"><p>with:</p></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph"><p>Only valid for the <strong>Input</strong>, <strong>Output</strong>, <strong>UniformConstant</strong>, <strong>TileImageEXT</strong> Storage Classes.</p></div>
</div></div>
</div>
<div class="sect2">
<h3 id="_capabilities">Capabilities</h3>
<div class="paragraph"><p>Modify Section 3.31, "Capability", adding these rows to the Capability table:</p></div>
<div class="openblock">
<div class="content">
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:33%;">
<col style="width:33%;">
<col style="width:33%;">
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2" > Capability </th>
<th class="tableblock halign-center valign-top" > Implicitly Declares</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4166</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>TileImageColorReadAccessEXT</strong><br>
Uses <strong>TileImageDataEXT</strong> Dim and <strong>TileImageEXT</strong> storage
class to create tile image variables. Uses
<strong>OpColorAttachmentReadEXT</strong> to read tile image variables.</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4167</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>TileImageDepthReadAccessEXT</strong><br>
Uses <strong>OpDepthAttachmentReadEXT</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4168</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><strong>TileImageStencilReadAccessEXT</strong><br>
Uses <strong>OpStencilAttachmentReadEXT</strong></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"></p></td>
</tr>
</tbody>
</table>
</div></div>
</div>
<div class="sect2">
<h3 id="_instructions">Instructions</h3>
<div class="paragraph"><p>In section 3.37.6 ("Type-Declaration Instructions"), modify the definition of
<strong>OpTypeImage</strong> to include:</p></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph"><p>If <em>Dim</em> is <strong>TileImageDataEXT</strong>, <em>Sampled Type</em> must not be <strong>OpTypeVoid</strong>,
<em>Sampled</em> must be 2, <em>Image Format</em> must be <strong>Unknown</strong>, <em>Depth</em> must be 0,
<em>Arrayed</em> must be 0 and the Execution Model must be <strong>Fragment</strong>.</p></div>
</div></div>
<div class="paragraph"><p>Modify the definition of <strong>OpTypeSampledImage</strong> to read:</p></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph"><p>Image Type must be an OpTypeImage with a sampled parameter of 0 or 1. It is the
type of the image in the combined sampler and image type. Starting with version
1.6, it must not have a Dim of Buffer.</p></div>
</div></div>
<div class="paragraph"><p>In section 3.42.8 ("Memory Instructions"), modify the definition of <strong>OpImageTexelPointer</strong> to read:</p></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph"><p>The <em>Dim</em> operand of Type must not be <strong>SubpassData</strong> or <strong>TileImageDataEXT</strong>.</p></div>
</div></div>
<div class="paragraph"><p>In section 3.42.10 ("Image Instructions"), modify the definition of the instructions as shown:</p></div>
<div class="paragraph"><p><strong>OpImageRead</strong></p></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph"><p><em>Image</em> must be an object whose type is <strong>OpTypeImage</strong> with a <em>Sampled</em> operand of 0 or 2, and <em>Dim</em> operand is not <strong>TileImageDataEXT</strong>.</p></div>
</div></div>
<div class="paragraph"><p><strong>OpImageWrite</strong></p></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph"><p><em>Image</em> must be an object whose type is <strong>OpTypeImage</strong> with a <em>Sampled</em> operand of 0 or 2, and <em>Dim</em> operand is not <strong>TileImageDataEXT</strong>.</p></div>
</div></div>
<div class="paragraph"><p><strong>OpImageQueryFormat</strong></p></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph"><p><em>Image</em> must be an object whose type is <strong>OpTypeImage</strong> with a <em>Dim</em> operand which is not <strong>TileImageDataEXT</strong>.</p></div>
</div></div>
<div class="paragraph"><p><strong>OpImageQueryOrder</strong></p></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph"><p><em>Image</em> must be an object whose type is <strong>OpTypeImage</strong> with a <em>Dim</em> operand which is not <strong>TileImageDataEXT</strong>.</p></div>
</div></div>
<div class="paragraph"><p><strong>OpImageSparseRead</strong></p></div>
<div class="exampleblock">
<div class="content">
<div class="paragraph"><p>The <em>Image Dim</em> operand must not be <strong>SubpassData</strong> or <strong>TileImageDataEXT</strong>.</p></div>
</div></div>
<div class="paragraph"><p>Add the new instructions:</p></div>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:16%;">
<col style="width:16%;">
<col style="width:16%;">
<col style="width:16%;">
<col style="width:16%;">
<col style="width:16%;">
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="5" ><p class="tableblock"><a id="OpColorAttachmentReadEXT"></a>
<strong>OpColorAttachmentReadEXT</strong><br>
<br>
 Read the current value of a tile image variable at the current fragment
 location. The read access is guaranteed to be in rasterization order as defined
 by the client API specification unless the <strong>NonCoherentColorAttachmentReadEXT</strong>
 execution mode is set.<br>
<br>
 <em>Result</em> is the returned value.<br>
<br>
 <em>Result Type</em> must be a scalar or vector of <em>floating-point type</em> or <em>integer
 type</em>. It must be a scalar or vector with component type the same as <em>Sampled
 Type</em> of the <strong>OpTypeImage</strong>.<br>
<br>
 <em>Attachment</em> must be an object whose type is <strong>OpTypeImage</strong> with a <em>Dim</em> of
 <strong>TileImageDataEXT</strong><br>
<br>
 <em>Sample</em> is the sample number of the sample to read at the current fragment
 location.  It must be an <em>integer type</em> scalar. If <em>Sample</em> is not specified,
 it is as if <em>Sample</em> has the value 0. The sample numbering is identical to that
 used for SampleId.<br>
<br>
 This instruction is only valid in the <strong>Fragment</strong> Execution Model.<br>
<br></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Capability:<br>
<strong>TileImageColorReadAccessEXT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4 + variable</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4160</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><em>&lt;id&gt; Result Type</em></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><em>Result &lt;id&gt;</em></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><em>&lt;id&gt; Attachment</em></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Optional <em>&lt;id&gt; Sample</em></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:20%;">
<col style="width:20%;">
<col style="width:20%;">
<col style="width:20%;">
<col style="width:20%;">
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4" ><p class="tableblock"><a id="OpDepthAttachmentReadEXT"></a>
<strong>OpDepthAttachmentReadEXT</strong><br>
<br>
 Read the current depth value at the fragment location. The read access is
 guaranteed to be in rasterization order as defined by the client API
 specification unless the <strong>NonCoherentDepthAttachmentReadEXT</strong> execution mode
 is set.<br>
<br>
 <em>Result</em> is the returned depth value.<br>
<br>
 <em>Result Type</em> must be a 32-bit <em>floating-point type</em> scalar.<br>
<br>
 <em>Sample</em> is the sample number of the sample to read at the current fragment
 location.  It must be an <em>integer type</em> scalar. If <em>Sample</em> is not specified,
 it is as if <em>Sample</em> has the value 0. The sample numbering is identical to that
 used for SampleId.<br>
<br>
 This instruction is only valid in the <strong>Fragment</strong> Execution Model.<br>
<br></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Capability:<br>
<strong>TileImageDepthReadAccessEXT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">3 + variable</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4161</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><em>&lt;id&gt; Result Type</em></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><em>Result &lt;id&gt;</em></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Optional <em>&lt;id&gt; Sample</em></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all"
style="
width:100%;
">
<col style="width:20%;">
<col style="width:20%;">
<col style="width:20%;">
<col style="width:20%;">
<col style="width:20%;">
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4" ><p class="tableblock"><a id="OpStencilAttachmentReadEXT"></a>
<strong>OpStencilAttachmentReadEXT</strong><br>
<br>
 Read the current stencil value at the current fragment location. The read
 access is guaranteed to be in rasterization order as defined by the client API
 specification unless the <strong>NonCoherentStencilAttachmentReadEXT</strong> execution
 mode is set.<br>
<br>
 <em>Result</em> is the returned stencil value.<br>
<br>
 <em>Result Type</em> must be a 32-bit <em>integer type</em> scalar.<br>
<br>
 <em>Sample</em> is the sample number of the sample to read at the current fragment
 location.  It must be an <em>integer type</em> scalar. If <em>Sample</em> is not specified,
 it is as if <em>Sample</em> has the value 0. The sample numbering is identical to that
 used for SampleId.<br>
<br>
 This instruction is only valid in the <strong>Fragment</strong> Execution Model.<br>
<br></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Capability:<br>
<strong>TileImageStencilReadAccessEXT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">3 + variable</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">4162</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><em>&lt;id&gt; Result Type</em></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock"><em>Result &lt;id&gt;</em></p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Optional <em>&lt;id&gt; Sample</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_issues">Issues</h2>
<div class="sectionbody">
<div class="paragraph"><p>Issues 1 to 4 have been copied from VK_EXT_shader_tile_image for easy reference.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Should we reuse OpTypeImage, or introduce a new type for declaring tile images?
</p>
<div class="openblock">
<div class="content">
<div class="paragraph"><p><strong>RESOLVED</strong>: OpTypeImage is reused with a special Dim for tile images, following
what was done for subpass attachments.</p></div>
<div class="paragraph"><p>An alternative would have been to make tile images their own type, and
introduce an OpTypeTileImage type.
That would require less special-casing of OpTypeImage, but comes with higher
initial burden in tooling.</p></div>
</div></div>
</li>
<li>
<p>
Should Color, Depth, and Stencil reads use the same SPIR-V opcode?
</p>
<div class="openblock">
<div class="content">
<div class="paragraph"><p><strong>RESOLVED</strong>: No. The extension introduces separate opcodes.</p></div>
<div class="paragraph"><p>Tile based GPUs which guarantee framebuffer residency in tile memory can offer
efficient raster order access to color, depth, stencil data with relatively low
overhead. Some GPU implementations would have a significant performance penalty
in raster order access if the implementation cannot determine from the SPIR-V
shader whether a specific access is color, depth, or stencil.</p></div>
</div></div>
</li>
<li>
<p>
Should Depth and Stencil read opcodes consume an image operand specifying the
  attachment, or should it be implicit?
</p>
<div class="openblock">
<div class="content">
<div class="paragraph"><p><strong>RESOLVED</strong>: No operand is necessary as there is depth and stencil uniquely
identify the attachments unlike with color.</p></div>
<div class="paragraph"><p>The other options considered were:</p></div>
<div class="olist upperalpha"><ol class="upperalpha">
<li>
<p>
Allow depth and stencil tile images to be declared as variables.
    Tile images are defined to map to the color attachment specified via the
    <span class="monospaced">Location</span> decoration - some equivalent needs to be defined for depth and
    stencil. Pixel Local Storage like functionality of supporting format
    reinterpretation is only supported for color attachments, and hence
    must be disallowed for depth and stencil. There is very little benefit to
    declaring the depth and stencil variables given these restrictions.
</p>
</li>
<li>
<p>
Depth and stencil tile images are exposed as built-in variables.
</p>
</li>
</ol></div>
<div class="paragraph"><p>Given the design choice made for issue 8, the other options do not add
any value.</p></div>
</div></div>
</li>
<li>
<p>
Should this extension re-use the image Dim SubpassData or introduce a new Dim?
</p>
<div class="openblock">
<div class="content">
<div class="paragraph"><p><strong>RESOLVED</strong>: The extension introduces a new Dim.</p></div>
<div class="paragraph"><p>This extension is intended to serve as foundation for further functionality,
for example Pixel Local Storage like format reinterpretation, or to define
the tile size and allow tile shaders to access any pixel within the tile.</p></div>
<div class="paragraph"><p>In SPIR-V, input attachments use images with Dim of SubpassData.
We use a new Dim so we can easily distinguish whether an image is an input
attachment or a tile image.</p></div>
</div></div>
</li>
</ol></div>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history">Revision History</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-rows"
style="
width:100%;
">
<col style="width:4%;">
<col style="width:14%;">
<col style="width:14%;">
<col style="width:66%;">
<thead>
<tr>
<th class="tableblock halign-left valign-top" >Rev</th>
<th class="tableblock halign-left valign-top" >Date</th>
<th class="tableblock halign-left valign-top" >Author</th>
<th class="tableblock halign-left valign-top" >Changes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" ><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">2023-03-23</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Sandeep Kakarlapudi</p></td>
<td class="tableblock halign-left valign-top" ><p class="tableblock">Initial revision</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Last updated
 2023-03-30 12:47:02 CEST
</div>
</div>
</body>
</html>
