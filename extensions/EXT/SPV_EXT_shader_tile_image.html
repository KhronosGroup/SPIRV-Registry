<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>SPV_EXT_shader_tile_image</title>
<style>
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";
@import "https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css";

p {
    font-family: Arial, Helvetica, sans-serif;
    line-height: normal;
}
em, b, strong {
    color: darkblue;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>SPV_EXT_shader_tile_image</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_name_strings">Name Strings</a></li>
<li><a href="#_contact">Contact</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_notice">Notice</a></li>
<li><a href="#_status">Status</a></li>
<li><a href="#_version">Version</a></li>
<li><a href="#_dependencies">Dependencies</a></li>
<li><a href="#_overview">Overview</a></li>
<li><a href="#_extension_name">Extension Name</a></li>
<li><a href="#_new_capabilities">New Capabilities</a></li>
<li><a href="#_new_instructions">New Instructions</a></li>
<li><a href="#_new_execution_modes">New Execution Modes</a></li>
<li><a href="#_modifications_to_the_spir_v_specification_version_1_5">Modifications to the SPIR-V Specification, Version 1.5</a></li>
<li><a href="#_issues">Issues</a></li>
<li><a href="#_revision_history">Revision History</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_name_strings">Name Strings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>SPV_EXT_shader_tile_image</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contact">Contact</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To report problems with this extension, please open a new issue at:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/KhronosGroup/SPIRV-Headers" class="bare">https://github.com/KhronosGroup/SPIRV-Headers</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributors">Contributors</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Sandeep Kakarlapudi, Arm</p>
</li>
<li>
<p>Jan-Harald Fredriksen, Arm</p>
</li>
<li>
<p>Alan Baker, Google</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notice">Notice</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright (c) 2021-2023 The Khronos Group Inc. Copyright terms at
<a href="http://www.khronos.org/registry/speccopyright.html" class="bare">http://www.khronos.org/registry/speccopyright.html</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_status">Status</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Complete</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version">Version</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stripes-even" style="width: 40%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last Modified Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2023-03-23</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_dependencies">Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension is written against the Unified SPIR-V Specification,
Version 1.5 Revision 5.</p>
</div>
<div class="paragraph">
<p>This extension requires SPIR-V 1.0.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension adds functionality to enable fragment shaders to read color,
depth or stencil data from the framebuffer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extension_name">Extension Name</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use this extension within a SPIR-V module, the following <strong>OpExtension</strong> must
be present in the module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpExtension "SPV_EXT_shader_tile_image"</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_capabilities">New Capabilities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension introduces new capabilities:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>TileImageColorReadAccessEXT
TileImageDepthReadAccessEXT
TileImageStencilReadAccessEXT</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_instructions">New Instructions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instructions added under the <strong>TileImageColorReadAccessEXT</strong> capability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpColorAttachmentReadEXT</pre>
</div>
</div>
<div class="paragraph">
<p>Instructions added under the <strong>TileImageDepthReadAccessEXT</strong> capability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpDepthAttachmentReadEXT</pre>
</div>
</div>
<div class="paragraph">
<p>Instructions added under the <strong>TileImageStencilReadAccessEXT</strong> capability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpStencilAttachmentReadEXT</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_execution_modes">New Execution Modes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Execution modes added under the <strong>TileImageColorReadAccessEXT</strong> capability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NonCoherentColorAttachmentReadEXT</pre>
</div>
</div>
<div class="paragraph">
<p>Execution modes added under the <strong>TileImageDepthReadAccessEXT</strong> capability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NonCoherentDepthAttachmentReadEXT</pre>
</div>
</div>
<div class="paragraph">
<p>Execution modes added under the <strong>TileImageStencilReadAccessEXT</strong> capability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NonCoherentStencilAttachmentReadEXT</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modifications_to_the_spir_v_specification_version_1_5">Modifications to the SPIR-V Specification, Version 1.5</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_validation_rules">Validation Rules</h3>
<div class="paragraph">
<p>In section 2.16.1 Universal Validation Rules, add <strong>TileImageEXT</strong> to the list of
storage classes following this sentence:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Any pointer operand to an OpFunctionCall must point into one of the following
storage classes:</pre>
</div>
</div>
<div class="paragraph">
<p>In 2.16.2. Validation Rules for Shader Capabilities, add the following
under Decorations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is invalid to apply the <strong>Coherent</strong> decoration to variables in the
<strong>TileImageEXT</strong> storage class if the <strong>NonCoherentColorAttachmentReadEXT</strong>
execution mode is declared.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_execution_modes">Execution Modes</h3>
<div class="paragraph">
<p>In section 3.6 "Execution Mode", add the following rows to the Execution Mode
table:</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">Execution Mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extra Operands</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enabling Capabilities</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4169</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NonCoherentColorAttachmentReadEXT</strong><br>
Disables rasterization order access guarantees for color attachment reads. Only
valid in the <strong>Fragment</strong> execution model.</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TileImageColorReadAccessEXT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4170</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NonCoherentDepthAttachmentReadEXT</strong><br>
Disables rasterization order access guarantees for depth attachment reads. Only
valid in the <strong>Fragment</strong> execution model.</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TileImageDepthReadAccessEXT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4171</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NonCoherentStencilAttachmentReadEXT</strong><br>
Disables rasterization order access guarantees for stencil attachment reads. Only
valid in the <strong>Fragment</strong> execution model.</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TileImageStencilReadAccessEXT</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_storage_classes">Storage Classes</h3>
<div class="paragraph">
<p>In section 3.7 "Storage Class", add the following rows to the Storage Class
table:</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">Storage Class</th>
<th class="tableblock halign-left valign-top">Enabling Capabilities</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4172</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TileImageEXT</strong><br>
Visible across all functions in all fragment invocations at a pixel location
within a render pass. For holding framebuffer color attachment memory. Only
valid with image type variables with <strong>Dim</strong> TileImageDataEXT. See the Client
API specification for more details on
tile images.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TileImageColorReadAccessEXT</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_dims">Dims</h3>
<div class="paragraph">
<p>In section 3.8 "Dim", add the following row to the Dim table:</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">Dim</th>
<th class="tableblock halign-left valign-top">Enabling Capabilities</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4173</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TileImageDataEXT</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TileImageColorReadAccessEXT</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_decorations">Decorations</h3>
<div class="paragraph">
<p>In section 3.20 "Decoration", modify the description for "Location" replace the
last sentence:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Only valid for the <strong>Input</strong>, <strong>Output</strong>, and <strong>UniformConstant</strong> Storage Classes.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>with:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Only valid for the <strong>Input</strong>, <strong>Output</strong>, <strong>UniformConstant</strong>, <strong>TileImageEXT</strong> Storage Classes.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_capabilities">Capabilities</h3>
<div class="paragraph">
<p>Modify Section 3.31, "Capability", adding these rows to the Capability table:</p>
</div>
<div class="openblock">
<div class="content">
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">Capability</th>
<th class="tableblock halign-center valign-top">Implicitly Declares</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4166</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TileImageColorReadAccessEXT</strong><br>
Uses <strong>TileImageDataEXT</strong> Dim and <strong>TileImageEXT</strong> storage
class to create tile image variables. Uses
<strong>OpColorAttachmentReadEXT</strong> to read tile image variables.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4167</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TileImageDepthReadAccessEXT</strong><br>
Uses <strong>OpDepthAttachmentReadEXT</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4168</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>TileImageStencilReadAccessEXT</strong><br>
Uses <strong>OpStencilAttachmentReadEXT</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instructions">Instructions</h3>
<div class="paragraph">
<p>In section 3.37.6 ("Type-Declaration Instructions"), modify the definition of
<strong>OpTypeImage</strong> to include:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>If <em>Dim</em> is <strong>TileImageDataEXT</strong>, <em>Sampled Type</em> must not be <strong>OpTypeVoid</strong>,
<em>Sampled</em> must be 2, <em>Image Format</em> must be <strong>Unknown</strong>, <em>Depth</em> must be 0,
<em>Arrayed</em> must be 0 and the Execution Model must be <strong>Fragment</strong>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Modify the definition of <strong>OpTypeSampledImage</strong> to read:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Image Type must be an OpTypeImage with a sampled parameter of 0 or 1. It is the
type of the image in the combined sampler and image type. Starting with version
1.6, it must not have a Dim of Buffer.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>In section 3.42.8 ("Memory Instructions"), modify the definition of <strong>OpImageTexelPointer</strong> to read:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The <em>Dim</em> operand of Type must not be <strong>SubpassData</strong> or <strong>TileImageDataEXT</strong>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>In section 3.42.10 ("Image Instructions"), modify the definition of the instructions as shown:</p>
</div>
<div class="paragraph">
<p><strong>OpImageRead</strong></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><em>Image</em> must be an object whose type is <strong>OpTypeImage</strong> with a <em>Sampled</em> operand of 0 or 2, and <em>Dim</em> operand is not <strong>TileImageDataEXT</strong>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>OpImageWrite</strong></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><em>Image</em> must be an object whose type is <strong>OpTypeImage</strong> with a <em>Sampled</em> operand of 0 or 2, and <em>Dim</em> operand is not <strong>TileImageDataEXT</strong>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>OpImageQueryFormat</strong></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><em>Image</em> must be an object whose type is <strong>OpTypeImage</strong> with a <em>Dim</em> operand which is not <strong>TileImageDataEXT</strong>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>OpImageQueryOrder</strong></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><em>Image</em> must be an object whose type is <strong>OpTypeImage</strong> with a <em>Dim</em> operand which is not <strong>TileImageDataEXT</strong>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>OpImageSparseRead</strong></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The <em>Image Dim</em> operand must not be <strong>SubpassData</strong> or <strong>TileImageDataEXT</strong>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Add the new instructions:</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="5"><p class="tableblock"><a id="OpColorAttachmentReadEXT"></a>
<strong>OpColorAttachmentReadEXT</strong><br>
<br>
 Read the current value of a tile image variable at the current fragment
 location. The read access is guaranteed to be in rasterization order as defined
 by the client API specification unless the <strong>NonCoherentColorAttachmentReadEXT</strong>
 execution mode is set.<br>
<br>
 <em>Result</em> is the returned value.<br>
<br>
 <em>Result Type</em> must be a scalar or vector of <em>floating-point type</em> or <em>integer
 type</em>. It must be a scalar or vector with component type the same as <em>Sampled
 Type</em> of the <strong>OpTypeImage</strong>.<br>
<br>
 <em>Attachment</em> must be an object whose type is <strong>OpTypeImage</strong> with a <em>Dim</em> of
 <strong>TileImageDataEXT</strong><br>
<br>
 <em>Sample</em> is the sample number of the sample to read at the current fragment
 location.  It must be an <em>integer type</em> scalar. If <em>Sample</em> is not specified,
 it is as if <em>Sample</em> has the value 0. The sample numbering is identical to that
 used for SampleId.<br>
<br>
 This instruction is only valid in the <strong>Fragment</strong> Execution Model.<br>
<br></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capability:<br>
<strong>TileImageColorReadAccessEXT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 + variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4160</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;id&gt; Result Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result &lt;id&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;id&gt; Attachment</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional <em>&lt;id&gt; Sample</em></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><a id="OpDepthAttachmentReadEXT"></a>
<strong>OpDepthAttachmentReadEXT</strong><br>
<br>
 Read the current depth value at the fragment location. The read access is
 guaranteed to be in rasterization order as defined by the client API
 specification unless the <strong>NonCoherentDepthAttachmentReadEXT</strong> execution mode
 is set.<br>
<br>
 <em>Result</em> is the returned depth value.<br>
<br>
 <em>Result Type</em> must be a 32-bit <em>floating-point type</em> scalar.<br>
<br>
 <em>Sample</em> is the sample number of the sample to read at the current fragment
 location.  It must be an <em>integer type</em> scalar. If <em>Sample</em> is not specified,
 it is as if <em>Sample</em> has the value 0. The sample numbering is identical to that
 used for SampleId.<br>
<br>
 This instruction is only valid in the <strong>Fragment</strong> Execution Model.<br>
<br></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capability:<br>
<strong>TileImageDepthReadAccessEXT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 + variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4161</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;id&gt; Result Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result &lt;id&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional <em>&lt;id&gt; Sample</em></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><a id="OpStencilAttachmentReadEXT"></a>
<strong>OpStencilAttachmentReadEXT</strong><br>
<br>
 Read the current stencil value at the current fragment location. The read
 access is guaranteed to be in rasterization order as defined by the client API
 specification unless the <strong>NonCoherentStencilAttachmentReadEXT</strong> execution
 mode is set.<br>
<br>
 <em>Result</em> is the returned stencil value.<br>
<br>
 <em>Result Type</em> must be a 32-bit <em>integer type</em> scalar.<br>
<br>
 <em>Sample</em> is the sample number of the sample to read at the current fragment
 location.  It must be an <em>integer type</em> scalar. If <em>Sample</em> is not specified,
 it is as if <em>Sample</em> has the value 0. The sample numbering is identical to that
 used for SampleId.<br>
<br>
 This instruction is only valid in the <strong>Fragment</strong> Execution Model.<br>
<br></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capability:<br>
<strong>TileImageStencilReadAccessEXT</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 + variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4162</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;id&gt; Result Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Result &lt;id&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional <em>&lt;id&gt; Sample</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_issues">Issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Issues 1 to 4 have been copied from VK_EXT_shader_tile_image for easy reference.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Should we reuse OpTypeImage, or introduce a new type for declaring tile images?</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>RESOLVED</strong>: OpTypeImage is reused with a special Dim for tile images, following
what was done for subpass attachments.</p>
</div>
<div class="paragraph">
<p>An alternative would have been to make tile images their own type, and
introduce an OpTypeTileImage type.
That would require less special-casing of OpTypeImage, but comes with higher
initial burden in tooling.</p>
</div>
</div>
</div>
</li>
<li>
<p>Should Color, Depth, and Stencil reads use the same SPIR-V opcode?</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>RESOLVED</strong>: No. The extension introduces separate opcodes.</p>
</div>
<div class="paragraph">
<p>Tile based GPUs which guarantee framebuffer residency in tile memory can offer
efficient raster order access to color, depth, stencil data with relatively low
overhead. Some GPU implementations would have a significant performance penalty
in raster order access if the implementation cannot determine from the SPIR-V
shader whether a specific access is color, depth, or stencil.</p>
</div>
</div>
</div>
</li>
<li>
<p>Should Depth and Stencil read opcodes consume an image operand specifying the
attachment, or should it be implicit?</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>RESOLVED</strong>: No operand is necessary as there is depth and stencil uniquely
identify the attachments unlike with color.</p>
</div>
<div class="paragraph">
<p>The other options considered were:</p>
</div>
<div class="olist upperalpha">
<ol class="upperalpha">
<li>
<p>Allow depth and stencil tile images to be declared as variables.
Tile images are defined to map to the color attachment specified via the
<code>Location</code> decoration - some equivalent needs to be defined for depth and
stencil. Pixel Local Storage like functionality of supporting format
reinterpretation is only supported for color attachments, and hence
must be disallowed for depth and stencil. There is very little benefit to
declaring the depth and stencil variables given these restrictions.</p>
</li>
<li>
<p>Depth and stencil tile images are exposed as built-in variables.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Given the design choice made for issue 8, the other options do not add
any value.</p>
</div>
</div>
</div>
</li>
<li>
<p>Should this extension re-use the image Dim SubpassData or introduce a new Dim?</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>RESOLVED</strong>: The extension introduces a new Dim.</p>
</div>
<div class="paragraph">
<p>This extension is intended to serve as foundation for further functionality,
for example Pixel Local Storage like format reinterpretation, or to define
the tile size and allow tile shaders to access any pixel within the tile.</p>
</div>
<div class="paragraph">
<p>In SPIR-V, input attachments use images with Dim of SubpassData.
We use a new Dim so we can easily distinguish whether an image is an input
attachment or a tile image.</p>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history">Revision History</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-rows stripes-even stretch">
<colgroup>
<col style="width: 4.7619%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rev</th>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Author</th>
<th class="tableblock halign-left valign-top">Changes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2023-03-23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sandeep Kakarlapudi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial revision</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>