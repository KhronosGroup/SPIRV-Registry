<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>SPV_INTEL_usm_storage_classes</title>
<style>
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";
@import "https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css";

p {
    font-family: Arial, Helvetica, sans-serif;
    line-height: normal;
}
em, b, strong {
    color: darkblue;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>SPV_INTEL_usm_storage_classes</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_name_strings">Name Strings</a></li>
<li><a href="#_contact">Contact</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_notice">Notice</a></li>
<li><a href="#_status">Status</a></li>
<li><a href="#_version">Version</a></li>
<li><a href="#_dependencies">Dependencies</a></li>
<li><a href="#_overview">Overview</a></li>
<li><a href="#_extension_name">Extension Name</a></li>
<li><a href="#_new_capabilities">New capabilities</a></li>
<li><a href="#_token_number_assignments">Token Number Assignments</a></li>
<li><a href="#_modifications_to_the_spir_v_specification_version_1_6_revision_2">Modifications to the SPIR-V Specification, Version 1.6 Revision 2</a></li>
<li><a href="#_issues">Issues</a></li>
<li><a href="#_revision_history">Revision History</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_name_strings">Name Strings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>SPV_INTEL_usm_storage_classes</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contact">Contact</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To report problems with this extension, please open a new issue at:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/KhronosGroup/SPIRV-Headers" class="bare">https://github.com/KhronosGroup/SPIRV-Headers</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributors">Contributors</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Joe Garvey, Intel</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notice">Notice</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright (c) 2022 Intel Corporation.  All rights reserved.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_status">Status</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Final Draft</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version">Version</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width: 40%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last Modified Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-04-30</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_dependencies">Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension is written against the SPIR-V Specification,
Version 1.6 Revision 2.</p>
</div>
<div class="paragraph">
<p>This extension requires SPIR-V 1.0.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension introduces two new storage classes that are sub classes of the CrossWorkgroup storage class.
Using these more specific storage classes provides additional information that can enable optimization.
The extension also introduces two new conversion instructions to enable converting pointers from and to these storage classes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extension_name">Extension Name</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use this extension within a SPIR-V module, the following <strong>OpExtension</strong> must be present in the module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpExtension "SPV_INTEL_usm_storage_classes"</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_capabilities">New capabilities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension introduces a new capability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>USMStorageClassesINTEL</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_token_number_assignments">Token Number Assignments</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-rows" style="width: 40%;">
<colgroup>
<col style="width: 70%;">
<col style="width: 30%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpPtrCastToCrossWorkgroupINTEL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5934</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">USMStorageClassesINTEL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5935</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DeviceOnlyINTEL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5936</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HostOnlyINTEL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5937</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpCrossWorkgroupCastToPtrINTEL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5938</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_modifications_to_the_spir_v_specification_version_1_6_revision_2">Modifications to the SPIR-V Specification, Version 1.6 Revision 2</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_storage_class">Storage Class</h3>
<div class="paragraph">
<p>Modify Section 3.7, Storage Class, adding these rows to the table:</p>
</div>
<div class="openblock">
<div class="content">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">Storage Class</th>
<th class="tableblock halign-left valign-top">Enabling Capabilities</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5936</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DeviceOnlyINTEL</strong><br>
A subset of the <strong>CrossWorkgroup</strong> storage class.  Memory that is resident on the device.  SYCL or OpenCL device unified shared memory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>USMStorageClassesINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5937</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>HostOnlyINTEL</strong><br>
A subset of the <strong>CrossWorkgroup</strong> storage class.  Memory that is resident on the host.  SYCL or OpenCL host unified shared memory.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>USMStorageClassesINTEL</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_capability">Capability</h3>
<div class="paragraph">
<p>Modify Section 3.31, Capability, adding a row to the Capability table:</p>
</div>
<div class="openblock">
<div class="content">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">Capability</th>
<th class="tableblock halign-center valign-top">Implicitly Declares</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5935</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>USMStorageClassesINTEL</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Kernel</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instructions">Instructions</h3>
<div class="paragraph">
<p>Modify Section 3.36.11, Conversion Instructions, adding two new instructions as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 27.2727%;">
<col style="width: 27.2727%;">
<col style="width: 27.2728%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>OpPtrCastToCrossWorkgroupINTEL</strong></p>
<p class="tableblock">Converts a pointer&#8217;s Storage Class from a more specific class to <strong>CrossWorkgroup</strong>.</p>
<p class="tableblock"><em>Result Type</em> must be an OpTypePointer.  Its Storage Class must be <strong>CrossWorkgroup</strong>.</p>
<p class="tableblock"><em>Pointer</em> must point to the <strong>DeviceOnlyINTEL</strong> or <strong>HostOnlyINTEL</strong> Storage Class.</p>
<p class="tableblock"><em>Pointer</em> must have the same type as <em>Result Type</em> aside from the Storage Class.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capability:<br>
<strong>USMStorageClassesINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5934</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;id&gt;<br>
Result Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result &lt;id&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;id&gt;<br>
Pointer</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 27.2727%;">
<col style="width: 27.2727%;">
<col style="width: 27.2728%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="4"><p class="tableblock"><strong>OpCrossWorkgroupCastToPtrINTEL</strong></p>
<p class="tableblock">Convert a pointer&#8217;s Storage Class from <strong>CrossWorkgroup</strong> to a more specific class.</p>
<p class="tableblock"><em>Result Type</em> must be an OpTypePointer.  <em>Result Type</em>'s Storage Class must be <strong>DeviceOnlyINTEL</strong> or <strong>HostOnlyINTEL</strong>.</p>
<p class="tableblock"><em>Pointer</em> must point to the <strong>CrossWorkgroup</strong> Storage Class.</p>
<p class="tableblock"><em>Pointer</em> must have the same type as <em>Result Type</em> aside from the Storage Class.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capability:<br>
<strong>USMStorageClassesINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5938</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;id&gt;<br>
Result Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result &lt;id&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;id&gt;<br>
Pointer</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_validation_rules">Validation Rules</h3>
<div class="paragraph">
<p>None.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_issues">Issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>None.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history">Revision History</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-rows stretch">
<colgroup>
<col style="width: 4.7619%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rev</th>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Author</th>
<th class="tableblock halign-left valign-top">Changes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2022-11-28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joe Garvey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Initial public release</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>