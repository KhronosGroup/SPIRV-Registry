<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>SPV_INTEL_fpga_loop_controls</title>
<style>
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";
@import "https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css";

p {
    font-family: Arial, Helvetica, sans-serif;
    line-height: normal;
}
em, b, strong {
    color: darkblue;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>SPV_INTEL_fpga_loop_controls</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_name_strings">Name Strings</a></li>
<li><a href="#_contact">Contact</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_notice">Notice</a></li>
<li><a href="#_status">Status</a></li>
<li><a href="#_version">Version</a></li>
<li><a href="#_dependencies">Dependencies</a></li>
<li><a href="#_overview">Overview</a></li>
<li><a href="#_extension_name">Extension Name</a></li>
<li><a href="#_new_capabilities">New capabilities</a></li>
<li><a href="#_token_number_assignments">Token Number Assignments</a></li>
<li><a href="#_modifications_to_the_spir_v_specification_version_1_4">Modifications to the SPIR-V Specification, Version 1.4</a></li>
<li><a href="#_issues">Issues</a></li>
<li><a href="#_revision_history">Revision History</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_name_strings">Name Strings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>SPV_INTEL_fpga_loop_controls</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contact">Contact</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To report problems with this extension, please open a new issue at:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/KhronosGroup/SPIRV-Registry" class="bare">https://github.com/KhronosGroup/SPIRV-Registry</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributors">Contributors</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Artem Chikin, Intel<br></p>
</li>
<li>
<p>Jessica Davies, Intel<br></p>
</li>
<li>
<p>Joe Garvey, Intel<br></p>
</li>
<li>
<p>Michael Kinsner, Intel<br></p>
</li>
<li>
<p>Mark Mendell, Intel<br></p>
</li>
<li>
<p>Ci Tian, Intel<br></p>
</li>
<li>
<p>Bowen Xue, Intel</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notice">Notice</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright (c) 2019-2022 Intel Corporation.  All rights reserved.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_status">Status</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Final draft</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version">Version</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width: 40%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last Modified Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2022-10-13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">J</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_dependencies">Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension is written against the SPIR-V Specification,
Version 1.4 Revision 1.</p>
</div>
<div class="paragraph">
<p>This extension requires SPIR-V 1.0.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension introduces additional loop controls for FPGA targets.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extension_name">Extension Name</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use this extension within a SPIR-V module, the following <strong>OpExtension</strong> must be present in the module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpExtension "SPV_INTEL_fpga_loop_controls"</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_capabilities">New capabilities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension introduces a new capability:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>FPGALoopControlsINTEL</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_token_number_assignments">Token Number Assignments</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-rows" style="width: 40%;">
<colgroup>
<col style="width: 70%;">
<col style="width: 30%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FPGALoopControlsINTEL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5888</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_modifications_to_the_spir_v_specification_version_1_4">Modifications to the SPIR-V Specification, Version 1.4</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_loop_control">Loop Control</h3>
<div class="paragraph">
<p>In section 3.23, Loop Control, add the following entries to the table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Loop Control</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Enabling Capabilities</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x10000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>InitiationIntervalINTEL</strong><br>
Strong request, to the extent possible, to implement this loop with an initiation interval specified as a subsequent literal-number operand to the instruction.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FPGALoopControlsINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x20000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MaxConcurrencyINTEL</strong><br>
Strong request, to the extent possible, to allow no more than a fixed number of threads or loop iterations to execute the loop concurrently as specified by a subsequent literal-number operand to the instruction.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FPGALoopControlsINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x40000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DependencyArrayINTEL</strong><br>
Guarantees that there are no dependencies on a particular variable between a number of loop iterations.
Can be applied to multiple variables, the number of which is specified as a subsequent literal-number operand to the instruction. Following that, for each variable, an &lt;id&gt; and literal number pair are provided indicating the variable and number of loop iterations. A number of loop iterations of 0 indicates that there are no loop-carried dependences on that variable.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FPGALoopControlsINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x80000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>PipelineEnableINTEL</strong><br>
Strong request, to the extent possible, to either pipeline iterations of this loop or to not pipeline iterations of this loop depending on the value of the subsequent literal number operand.  A value of 0 indicates a request not to pipeline while a value of 1 indicates a request to pipeline.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FPGALoopControlsINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x100000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LoopCoalesceINTEL</strong><br>
Request to combine the loops nested within this loop into a single loop. A subsequent 32-bit integer literal operand specifies the number of nested loop levels to coalesce. A value of 0 indicates that all loop levels should be coalesced.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FPGALoopControlsINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x200000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MaxInterleavingINTEL</strong><br>
Request to limit the number of pipelined interleaved invocations of this loop that can be executed simultaneously to the number specified subsequently as a 32-bit integer literal operand.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FPGALoopControlsINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x400000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>SpeculatedIterationsINTEL</strong><br>
Request to limit the number of iterations launched before the loop exit condition has been evaluated to the number specified subsequently as a 32-bit integer literal operand.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FPGALoopControlsINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x800000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>NoFusionINTEL</strong><br>
Strong request, to the extent possible, that this loop not be fused with any adjacent loop.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FPGALoopControlsINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x1000000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>LoopCountINTEL</strong><br>
Specify minimum, maximum and expected iteration counts of the loop. There are three 64-bit integer literal operands. The first operand is the minimum iteration count, the second is the maximum iteration count, and the third is the expected iteration count. A negative literal operand value specifies that the respective loop iteration bound or expectation is not defined. The behavior is undefined if the minimum iteration operand is non-negative and the loop iterates fewer times than that minimum.  The behavior is also undefined if the maximum iteration operand is non-negative and the loop iterates more times than that maximum.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FPGALoopControlsINTEL</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x2000000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MaxReinvocationDelayINTEL</strong><br>
Request to implement this loop with a maximum limit on the delay between launching the last iteration of a loop invocation and launching the first iteration of the next loop invocation. A subsequent positive 32-bit integer literal operand specifies the budget for the maximum reinvocation delay allowed. A value of 1 indicates that the first iteration of the next invocation should start immediately following the start of the last iteration of the previous loop invocation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>FPGALoopControlsINTEL</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_capability">Capability</h3>
<div class="paragraph">
<p>Modify Section 3.31, Capability, adding a row to the Capability table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">Capability</th>
<th class="tableblock halign-center valign-top">Implicitly Declares</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5888</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FPGALoopControlsINTEL</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_validation_rules">Validation Rules</h3>
<div class="paragraph">
<p>None.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_issues">Issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>None.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history">Revision History</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-rows stretch">
<colgroup>
<col style="width: 4.7619%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rev</th>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Author</th>
<th class="tableblock halign-left valign-top">Changes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-05-06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joe Garvey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Initial public release</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-05-07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Michael Kinsner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update overview wording</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-06-02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Michael Kinsner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use loop control bits directly, as allocated in SPIRV-Headers spir-v.xml</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-02-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Artem Chikin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add PipelineDisableINTEL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-02-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ci Tian</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add LoopCoalesceINTEL, MaxInterleavingINTEL and SpeculatedIterationsINTEL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-10-27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jessica Davies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add NoFusionINTEL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-11-17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joe Garvey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Made LoopCoalesceINTEL argument mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">H</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2021-05-03</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mark Mendell</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add LoopCountINTEL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">I</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2022-08-18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bowen Xue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add MaxReinvocationDelayINTEL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">J</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2022-10-13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bowen Xue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update wording of MaxReinvocationDelayINTEL</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</body>
</html>